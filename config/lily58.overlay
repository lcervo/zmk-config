/*
 * Copyright (c) 2022 The ZMK Contributors
 * 
 * SPDX-License-Identifier: MIT
 */

/ {
    chosen {
        zephyr,display = &ls0xx;
    };
};

&pro_micro_spi {
    status = "okay";
    compatible = "nordic,nrf-spim";
    
    ls0xx: ls0xx@0 {
        compatible = "sharp,ls0xx";
        label = "DISPLAY";
        spi-max-frequency = <1000000>;  // Reduced speed
        reg = <0>;
        width = <160>;
        height = <68>;
    };
};

// Override the default I2C display pins for SPI
&pro_micro_i2c {
    status = "disabled";
};

// Configure SPI pins for J4 connector
&pro_micro_spi {
    sck-pin = <6>;   // P0.06 - SCL becomes SCLK
    mosi-pin = <8>;  // P0.08 - SDA becomes MOSI
    miso-pin = <8>;  // Not used but required, reuse MOSI
    cs-gpios = <&pro_micro 1 GPIO_ACTIVE_HIGH>; // P0.17 - Extra pin for CS
};